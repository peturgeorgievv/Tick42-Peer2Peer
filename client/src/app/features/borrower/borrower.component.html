<div *ngIf="this.user">
  <br />
  <div class="row">
    <div
      class="justify-content-center align-items-center mb-1 col-md-6 col-sm-12 col-xs-12"
    >
      <div class="col-12">
        <div class="card card-pricing">
          <div class="card-header">
            <h4 class="card-title">Current Loans</h4>
          </div>

          <div *ngIf="this.currentLoans">
            <app-current-loan
              *ngFor="let loan of this.currentLoans"
              [loanData]="loan"
              [user]="this.user"
            ></app-current-loan>

          </div>
        </div>
      </div>
    </div>
    <br />


  <div
    class="justify-content-center align-items-center mb-1 col-md-6 col-sm-12 col-xs-12"
  >
    <div class="col-12">
      <button
        type="button"
        class="btn col-12 crate-req-btn"
        data-toggle="modal"
        data-target="#createLoanModal"
      >
        <b>Create Loan Request</b>
      </button>
      <app-create-loan-modal
        (createLoanRequest)="this.createLoanReq($event)"
      ></app-create-loan-modal>

      <div class="card card-pricing">
        <div class="card-header">
          <h4 class="card-title">Loan Requests(pending)</h4>
        </div>
        <!-- Here to make ngFor!!! -->
        <div class="card-body" *ngFor="let loanRequest of this.loanRequests">
          <ul
            class="list-unstyled"
            style="border: 2px solid gray; padding: 5px;"
          >
            Request:
            <li>
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between">
                    <div>
                      <p>
                        Amount:
                        <b>{{ this.loanRequest.amount | number: "1.2-2" }} $</b>
                      </p>
                      <p>
                        Period: <b>{{ this.loanRequest.period }} Months</b>
                      </p>
                      <!-- <p>Partial: </p> -->
                    </div>
                  </div>
                  <button class="btn col-6"><b>Edit</b></button>
                  <button
                    class="btn col-6"
                    (click)="this.deleteRequest(this.loanRequest.$requestId)"
                  >
                    <b>Delete</b>
                  </button>
                </div>
              </div>
            </li>
            <li>
              <!-- Here to make ngFor for investor!!! -->
              <div *ngFor="let suggestion of this.loanSuggestions">
                <div
                  *ngIf="suggestion.$requestId === this.loanRequest.$requestId"
                >
                  <h5>Investor: {{ this.suggestion.email }}</h5>
                  <div class="card">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <div>
                          <p>
                            Amount:
                            {{ this.suggestion.amount | number: "1.2-2" }} $
                          </p>
                          <p>Period: {{ this.suggestion.period }} Months</p>
                          <p>
                            Installments:
                            {{
                              (this.suggestion.amount *
                                this.suggestion.interestRate) /
                                100 /
                                this.suggestion.period +
                                this.suggestion.amount / this.suggestion.period
                                | number: "1.2-2"
                            }}
                            $
                          </p>
                          <p>
                            Interest Rate:
                            {{ this.suggestion.interestRate }} %
                          </p>
                          <p>
                            Penalty Rate Per Day:
                            {{ this.suggestion.penalty }} %
                          </p>
                          <!-- <p>Partial: {{this.suggestion.partial}}</p> -->
                        </div>
                      </div>
                      <button
                        class="btn col-6"
                        (click)="this.acceptRequest(this.suggestion)"
                      >
                        <b>Accept</b>
                      </button>
                      <button
                        class="btn col-6"
                        (click)="
                          this.rejectSuggestion(this.suggestion.$suggestionId)
                        "
                      >
                        <b>Reject</b>
                      </button>
                    </div>
                  </div>
                </div>
                <!-- <h5 *ngIf="suggestion.$requestId !== this.loanRequest.$requestId">No any suggestions at this moment!</h5> -->
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
